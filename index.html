<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸš€ Urodziny Jacka â€“ Misja: Start!</title>
  <meta name="description" content="Interaktywne zaproszenie na urodziny Jacka â€“ kosmos, rakiety, odliczanie, mapa, dodaj do kalendarza." />
  <meta name="theme-color" content="#0b1020" />
  <!-- Open Graph (karta linku w Messenger/WhatsApp). Po wygenerowaniu obrazu zapisz go jako og-image-rocket.png obok HTML. -->
  <meta property="og:title" content="ðŸš€ Urodziny Jacka â€“ Misja: Start!" />
  <meta property="og:description" content="17 sierpnia 2025, 15:00 â€“ Naprawa 463 (Altana). DoÅ‚Ä…cz do kosmicznej misji!" />
  <meta property="og:image" content="og-image-rocket.png" />
  <meta property="og:type" content="website" />
  <style>
    :root{ --bg:#0b1020; --bg-2:#0e1630; --text:#e8ecff; --muted:#a7b0d6; --accent:#6ae3ff; --accent-2:#8a7dff; --card:#121a35; --success:#35e39c; --warning:#ffd166; }
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:radial-gradient(1200px 600px at 10% -10%, #1a2448, transparent),radial-gradient(800px 400px at 90% -10%, #231a48, transparent),linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);color:var(--text);overflow-x:hidden}
    .stars, .stars:before, .stars:after{content:"";position:fixed;inset:0;background-repeat:repeat;z-index:-1;background-image:radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.8) 50%, transparent 51%),radial-gradient(1px 1px at 50px 80px, rgba(255,255,255,.7) 50%, transparent 51%),radial-gradient(1px 1px at 130px 120px, rgba(255,255,255,.6) 50%, transparent 51%),radial-gradient(2px 2px at 200px 20px, rgba(255,255,255,.5) 50%, transparent 51%);animation:drift 120s linear infinite;opacity:.7}
    .stars:before{animation-duration:180s;opacity:.5;filter:blur(.3px)}
    .stars:after{animation-duration:240s;opacity:.3;filter:blur(.8px)}
    @keyframes drift{from{background-position:0 0,0 0,0 0,0 0}to{background-position:2000px 0,1600px 0,1200px 0,800px 0}}
    header{padding:clamp(20px,4vw,40px);text-align:center;position:relative}
    .badge{display:inline-block;border:1px solid rgba(255,255,255,.2);padding:6px 10px;border-radius:999px;font-size:.85rem;color:var(--muted);background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.08));backdrop-filter:blur(6px)}
    h1{font-size:clamp(34px,8vw,72px);line-height:1.05;margin:16px auto 8px;letter-spacing:.5px;background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .sub{color:var(--muted);font-size:clamp(14px,2.5vw,18px)}
    .container{width:min(1000px,92vw);margin:0 auto}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.12));border:1px solid rgba(255,255,255,.12);border-radius:22px;padding:clamp(16px,3vw,28px);box-shadow:0 10px 40px rgba(0,0,0,.35)}
    .grid{display:grid;gap:clamp(16px,2.5vw,28px);grid-template-columns:1fr}
    @media (min-width:900px){.grid{grid-template-columns:1.2fr .8fr}}
    .rocket-wrap{position:relative;height:260px}
    .rocket{position:absolute;left:50%;transform:translateX(-50%);width:140px;animation:float 4s ease-in-out infinite;filter:drop-shadow(0 10px 22px rgba(0,0,0,.4))}
    @keyframes float{0%,100%{transform:translate(-50%,0)}50%{transform:translate(-50%,-12px)}}
    .flame{transform-origin:50% 0%;animation:flame 300ms ease-in-out infinite}
    @keyframes flame{0%,100%{transform:scaleY(1)}50%{transform:scaleY(1.25)}}
    .countdown{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:10px 0 0}
    .timebox{background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.15);border-radius:14px;padding:10px 12px;min-width:72px;text-align:center}
    .timebox .num{font-size:clamp(22px,4.5vw,34px);font-variant-numeric:tabular-nums}
    .timebox .lbl{font-size:12px;color:var(--muted)}
    .btns{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-top:18px}
    a.btn,button.btn{appearance:none;border:0;cursor:pointer;text-decoration:none;color:#0b1020;background:linear-gradient(90deg,var(--accent),var(--accent-2));padding:12px 16px;border-radius:14px;font-weight:700;transition:transform .12s ease,box-shadow .12s ease;box-shadow:0 6px 24px rgba(106,227,255,.25)}
    a.btn:hover,button.btn:hover{transform:translateY(-1px);box-shadow:0 10px 28px rgba(106,227,255,.35)}
    a.btn.secondary,button.btn.secondary{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.2);box-shadow:none}
    dl{display:grid;grid-template-columns:auto 1fr;gap:8px 14px;margin:0}
    dt{color:var(--muted)} dd{margin:0;font-weight:600}
    #ogPreview{margin: 12px auto 0;max-width:1200px}
    #ogCanvas{width:100%;height:auto;border-radius:16px;border:1px solid rgba(255,255,255,.12)}
    footer{text-align:center;color:var(--muted);font-size:.9rem;padding:24px}
    .sep{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent);margin:20px 0}
  </style>
</head>
<body>
  <div class="stars" aria-hidden="true"></div>
  <header>
    <span class="badge">MISJA URODZINOWA â€¢ STATUS: <strong>AKTYWNA</strong></span>
    <h1>Startujemy na urodziny <span id="kidName">Jacka</span>!</h1>
    <p class="sub">Rakiety, kosmos i dobra zabawa. DoÅ‚Ä…cz do zaÅ‚ogi i przygotuj siÄ™ na lot!</p>
    <div class="countdown" id="countdown" aria-live="polite"></div>
    <div class="btns">
      <button class="btn" id="addCalBtn" type="button">Dodaj do kalendarza</button>
      <a class="btn secondary" id="mapBtn" target="_blank" rel="noopener">PokaÅ¼ trasÄ™</a>
      <button class="btn secondary" id="shareBtn" type="button">UdostÄ™pnij</button>
      <button class="btn secondary" id="dlOgBtn" type="button">Pobierz obraz OG</button>
    </div>
    <div id="ogPreview" aria-label="PodglÄ…d obrazu do podglÄ…du linku (Open Graph)">
      <canvas id="ogCanvas" width="1200" height="630"></canvas>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <div class="rocket-wrap" aria-hidden="true">
          <svg class="rocket" viewBox="0 0 120 220" role="img" aria-label="Ilustracja rakiety">
            <defs>
              <linearGradient id="bodyGrad" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stop-color="#e7f0ff"/><stop offset="100%" stop-color="#bcd2ff"/>
              </linearGradient>
              <linearGradient id="accentGrad" x1="0" x2="1" y1="0" y2="0">
                <stop offset="0%" stop-color="#6ae3ff"/><stop offset="100%" stop-color="#8a7dff"/>
              </linearGradient>
            </defs>
            <path d="M60 10 C45 40 40 70 40 110 v40 h40 v-40 c0-40-5-70-20-100z" fill="url(#bodyGrad)" stroke="#9fb6f5" stroke-width="2"/>
            <circle cx="60" cy="95" r="12" fill="#0b1020" stroke="#8fb0ff" stroke-width="3"/>
            <path d="M40 145 l-22 18 v20 h22z" fill="url(#accentGrad)" />
            <path d="M80 145 l22 18 v20 h-22z" fill="url(#accentGrad)" />
            <rect x="52" y="150" width="16" height="16" rx="3" ry="3" fill="#c1d6ff" />
            <g class="flame"><path d="M60 168 c-8 10 -8 20 0 35 c8 -15 8 -25 0 -35z" fill="#ffd166"/><path d="M60 175 c-5 8 -5 15 0 26 c5 -11 5 -18 0 -26z" fill="#ff9f1a"/></g>
          </svg>
        </div>
        <h2 style="margin-top:0">SzczegÃ³Å‚y misji</h2>
        <div class="sep"></div>
        <dl>
          <dt>DowÃ³dca:</dt><dd id="hostName">Rodzice Jacka</dd>
          <dt>ZaÅ‚ogant:</dt><dd><span id="kidName2">Jacek</span> (<span id="kidAge">4</span> urodziny)</dd>
          <dt>Data:</dt><dd><span id="dateHuman">--</span></dd>
          <dt>Godzina:</dt><dd><span id="timeHuman">--</span></dd>
          <dt>Baza startowa:</dt><dd><span id="address">Naprawa 463, Altana</span></dd>
          <dt>Dress code:</dt><dd>Galaxy / kosmiczne akcenty (opcjonalnie)</dd>
        </dl>
        <p class="small" id="note">Nie trzeba potwierdzaÄ‡ przybycia â€” po prostu przyjdÅºcie! Pytania? <a id="telLink" href="tel:+48787121569">+48 787 121 569</a></p>
      </section>

      <section class="card" id="rsvp">
        <h2 style="margin-top:0">RSVP</h2>
        <p>Potwierdzanie nie jest potrzebne. Do zobaczenia na miejscu! ðŸŽ‰</p>
      </section>
    </div>

    <section class="card" aria-live="polite" style="margin-top:16px">
      <h2 style="margin-top:0">FAQ misji</h2>
      <details><summary>Gdzie zaparkowaÄ‡?</summary><p>DuÅ¼o miejsc przy ulicy obok bazy startowej. Prosimy nie zastawiaÄ‡ wjazdÃ³w sÄ…siadÃ³w.</p></details>
      <details><summary>Co przynieÅ›Ä‡?</summary><p>Dobry humor ðŸ’«. Prezent nieobowiÄ…zkowy â€“ najwaÅ¼niejsza jest Wasza obecnoÅ›Ä‡.</p></details>
    </section>
  </main>

  <footer>
    <div class="sep"></div>
    <p>Â© <span id="year"></span> Misja urodzinowa â€¢ Projekt zaproszenia: <em>Rodzice Jacka</em></p>
  </footer>

  <script>
    // === KONFIGURACJA WYDARZENIA ===
    const EVENT = {
      kidName: "Jacek",
      kidNameGen: "Jacka",
      kidAge: 4,
      title: "Urodziny Jacka â€“ Misja: Start!",
      hostName: "Rodzice Jacka",
      startLocal: "2025-08-17T15:00:00", // Europe/Warsaw
      durationHours: 3,
      address: "Naprawa 463, Altana",
      mapsQuery: "Naprawa 463, 34-240 JordanÃ³w",
      phone: "+48 787 121 569"
    };

    const $ = sel => document.querySelector(sel);

    function fmtDateTime(date){
      const d = new Date(date);
      return { date: d.toLocaleDateString('pl-PL', { weekday:'long', day:'2-digit', month:'long', year:'numeric' }), time: d.toLocaleTimeString('pl-PL', { hour:'2-digit', minute:'2-digit' }) };
    }

    function toUTCStringNoSep(date){
      const pad = n => String(n).padStart(2, '0');
      const d = new Date(date);
      const y = d.getUTCFullYear();
      const m = pad(d.getUTCMonth()+1);
      const dd = pad(d.getUTCDate());
      const hh = pad(d.getUTCHours());
      const mm = pad(d.getUTCMinutes());
      const ss = pad(d.getUTCSeconds());
      return `${y}${m}${dd}T${hh}${mm}${ss}Z`;
    }

    function makeICS(){
      const start = new Date(EVENT.startLocal);
      const end = new Date(start.getTime() + EVENT.durationHours*60*60*1000);
      const dtstamp = toUTCStringNoSep(new Date());
      const dtstart = toUTCStringNoSep(start);
      const dtend = toUTCStringNoSep(end);
      const desc = `DoÅ‚Ä…cz do kosmicznej misji urodzinowej!\n\nKontakt: ${EVENT.phone}`;
      const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nCALSCALE:GREGORIAN\nPRODID:-//Birthday Invite//PL\nMETHOD:PUBLISH\nBEGIN:VEVENT\nUID:${crypto.randomUUID()}\nDTSTAMP:${dtstamp}\nDTSTART:${dtstart}\nDTEND:${dtend}\nSUMMARY:${EVENT.title}\nLOCATION:${EVENT.address}\nDESCRIPTION:${desc}\nEND:VEVENT\nEND:VCALENDAR`;
      return new Blob([ics], { type: 'text/calendar;charset=utf-8' });
    }

    function setText(){
      document.title = `ðŸš€ ${EVENT.title}`;
      $('#kidName').textContent = (EVENT.kidNameGen || EVENT.kidName);
      $('#kidName2').textContent = EVENT.kidName;
      $('#kidAge').textContent = EVENT.kidAge;
      $('#hostName').textContent = EVENT.hostName;
      $('#address').textContent = EVENT.address;

      const {date, time} = fmtDateTime(EVENT.startLocal);
      $('#dateHuman').textContent = date;
      $('#timeHuman').textContent = time;
      $('#year').textContent = new Date().getFullYear();

      const telLink = $('#telLink');
      if (telLink) { telLink.textContent = EVENT.phone; telLink.href = `tel:${EVENT.phone.replace(/\s+/g,'')}`; }

      const maps = EVENT.mapsQuery.startsWith('http') ? EVENT.mapsQuery : `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(EVENT.mapsQuery)}`;
      const mapBtn = $('#mapBtn');
      if (mapBtn) mapBtn.href = maps;
    }

    function setupCountdown(){
      const el = $('#countdown');
      const target = new Date(EVENT.startLocal).getTime();
      function tick(){
        const now = Date.now();
        let diff = Math.max(0, target - now);
        const s = Math.floor(diff/1000);
        const days = Math.floor(s / 86400);
        const hours = Math.floor((s % 86400) / 3600);
        const mins = Math.floor((s % 3600) / 60);
        const secs = s % 60;
        el.innerHTML = ['dni','godz','min','sek'].map((lbl,i)=>{
          const val = [days,hours,mins,secs][i].toString().padStart(2,'0');
          return `<div class="timebox"><div class="num">${val}</div><div class="lbl">${lbl}</div></div>`;
        }).join('');
      }
      tick();
      setInterval(tick, 1000);
    }

    function drawOG(ctx){
      const W = 1200, H = 630;
      // TÅ‚o gradient + gwiazdy
      const g = ctx.createLinearGradient(0,0,0,H);
      g.addColorStop(0,'#0b1024'); g.addColorStop(1,'#0e1630');
      ctx.fillStyle = g; ctx.fillRect(0,0,W,H);
      for(let i=0;i<220;i++){ ctx.globalAlpha = Math.random()*0.7+0.3; ctx.fillStyle = '#fff'; const x=Math.random()*W, y=Math.random()*H; const r=Math.random()*1.5; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill(); }
      ctx.globalAlpha=1;
      // PoÅ›wiata/flare
      const rg = ctx.createRadialGradient(W*0.75,H*0.25,20,W*0.75,H*0.25,500);
      rg.addColorStop(0,'rgba(106,227,255,0.35)'); rg.addColorStop(1,'rgba(106,227,255,0)');
      ctx.fillStyle = rg; ctx.fillRect(0,0,W,H);
      // Orbita
      ctx.strokeStyle = 'rgba(138,125,255,0.7)'; ctx.lineWidth=2;
      ctx.beginPath(); ctx.ellipse(W*0.55,H*0.55,420,160,-0.35,0,Math.PI*1.15); ctx.stroke();
      // Rakieta (minimal)
      ctx.save(); ctx.translate(W*0.78,H*0.35); ctx.rotate(-0.35);
      ctx.fillStyle = '#e7f0ff'; ctx.strokeStyle = '#9fb6f5'; ctx.lineWidth=2;
      ctx.beginPath(); ctx.moveTo(0,-40); ctx.quadraticCurveTo(-18,5,-18,60); ctx.lineTo(18,60); ctx.quadraticCurveTo(18,5,0,-40); ctx.closePath(); ctx.fill(); ctx.stroke();
      // statewki
      ctx.fillStyle = '#8a7dff'; ctx.beginPath(); ctx.moveTo(-18,40); ctx.lineTo(-38,60); ctx.lineTo(-18,60); ctx.closePath(); ctx.fill();
      ctx.beginPath(); ctx.moveTo(18,40); ctx.lineTo(38,60); ctx.lineTo(18,60); ctx.closePath(); ctx.fill();
      // pÅ‚omieÅ„
      const grdF = ctx.createLinearGradient(0,60,0,110); grdF.addColorStop(0,'#ffd166'); grdF.addColorStop(1,'#ff9f1a');
      ctx.fillStyle = grdF; ctx.beginPath(); ctx.moveTo(0,60); ctx.quadraticCurveTo(-10,85,0,110); ctx.quadraticCurveTo(10,85,0,60); ctx.closePath(); ctx.fill();
      ctx.restore();
      // Teksty
      ctx.fillStyle = '#e8ecff';
      ctx.font = '900 120px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.textAlign = 'left'; ctx.textBaseline = 'top';
      const title = EVENT.kidName.toUpperCase();
      ctx.fillText(title, 80, 120);
      ctx.font = '700 46px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillStyle = '#a7b0d6';
      ctx.fillText('MISJA: START', 84, 230);
      ctx.font = '700 38px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillStyle = '#c9d2ff';
      const d = new Date(EVENT.startLocal);
      const dateStr = d.toLocaleDateString('pl-PL', { day:'2-digit', month:'2-digit', year:'numeric' }).replace(/\./g,'Â·');
      const timeStr = d.toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit'});
      ctx.fillText(`${dateStr}  ${timeStr}`, 84, 290);
      ctx.font = '600 34px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillStyle = '#9fb6f5';
      ctx.fillText('Naprawa 463 â€” Altana', 84, 340);
    }

    function setupButtons(){
      const addCal = $('#addCalBtn');
      if(addCal){ addCal.addEventListener('click', ()=>{ const blob = makeICS(); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'Urodziny-'+EVENT.kidName+'.ics'; document.body.appendChild(a); a.click(); setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 500); }); }

      const shareBtn = $('#shareBtn');
      if(shareBtn){ shareBtn.addEventListener('click', async ()=>{ const shareData = { title: EVENT.title, text: `DoÅ‚Ä…cz do urodzin ${EVENT.kidName}!`, url: location.href }; if(navigator.share){ try{ await navigator.share(shareData); }catch(e){} } else { await navigator.clipboard.writeText(shareData.url); alert('Skopiowano link. Wklej go do SMS/Messenger/WhatsApp.'); } }); }

      const dlOgBtn = $('#dlOgBtn');
      if(dlOgBtn){ dlOgBtn.addEventListener('click', ()=>{ const canvas = $('#ogCanvas'); const link = document.createElement('a'); link.download = 'og-image-rocket.png'; link.href = canvas.toDataURL('image/png'); link.click(); }); }
    }

    function init(){
      setText(); setupCountdown();
      const canvas = $('#ogCanvas'); const ctx = canvas.getContext('2d'); drawOG(ctx);
      setupButtons();
    }
    init();
  </script>
</body>
</html>
